function newPost(){let e=document.querySelectorAll(".recent-post-info");for(let t=0;t<e.length;t++){if(e[t].querySelector(".sticky"))continue;let n="";return n=e[t].previousSibling.classList.contains("right")?"newestPost-left":"newestPost-right",void(e[t].innerHTML+='<span class="'+n+'"></span>')}}function bbDiffDate(e,t){var n,o,a,l=1<arguments.length&&void 0!==t&&t,r=new Date,i=new Date(e),c=r.getTime()-i.getTime();return l?(n=c/864e5,o=c/36e5,a=c/6e4,12<c/2592e6?i.toLocaleDateString():7<=n?i.toLocaleDateString().substr(5):1<=n?parseInt(n)+""+GLOBAL_CONFIG.date_suffix.day:1<=o||1<=a?"最近":GLOBAL_CONFIG.date_suffix.just):parseInt(c/864e5)}function changeTimeInEssay(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach((function(e){var t=e,n=t.getAttribute("datetime");t.innerText=bbDiffDate(n,!0),t.style.display="inline"}))}function owoBig(){let e=1,t="",n=document.createElement("div");n.id="owo-big",document.querySelector("body").appendChild(n),document.getElementById("post-comment").addEventListener("DOMNodeInserted",(o=>{if(o.target.classList&&(o.target.classList.value,1)){let a=o.target;a.addEventListener("contextmenu",(e=>e.preventDefault())),a.addEventListener("mouseover",(o=>{"LI"==o.target.tagName&&e&&(e=!1,t=setTimeout((()=>{let e=3*o.path[0].clientHeight,t=3*o.path[0].clientWidth,a=o.x-o.offsetX-(t-o.path[0].clientWidth)/2,l=o.y-o.offsetY;n.style.height=e+"px",n.style.width=t+"px",n.style.left=a+"px",n.style.top=l+"px",n.style.display="flex",n.innerHTML=`<img src="${o.target.querySelector("img").src}">`}),300))})),a.addEventListener("mouseout",(o=>{n.style.display="none",e=1,clearTimeout(t)}))}}))}function getArrayItems(e,t){var n=new Array;for(var o in e)n.push(e[o]);for(var a=new Array,l=0;l<t&&0<n.length;l++){var r=Math.floor(Math.random()*n.length);a[l]=n[r],n.splice(r,1)}return a}function addFriendLinksInFooter(){fetch("https://fcircle.jayhrn.com/randomfriend?num=3").then((function(e){return e.json()})).then((function(e){for(var t=getArrayItems(e,3),n="",o=0;o<t.length;++o){var a=t[o];n+="<a class='footer-item' href='".concat(a.link,'\'  target="_blank" rel="noopener nofollow">').concat(a.name,"</a>")}n+="<a class='footer-item' href='/link/'>查看更多</a>",document.getElementById("friend-links-in-footer").innerHTML=n}))}""===GLOBAL_CONFIG_SITE.title.replace("Jayhrn","")?document.getElementById("page-name-text").style.display="none":document.querySelector("#page-name-text").innerHTML=document.title.split(" | Jayhrn")[0],"/"==location.pathname&&newPost(),"/essay/"==location.pathname&&changeTimeInEssay(),document.getElementById("post-comment")&&owoBig(),addFriendLinksInFooter();var getTimeState=function(){var e=(new Date).getHours(),t="";return 0<=e&&e<=5?t="晚安":5<e&&e<=10?t="早上好":10<e&&e<=14?t="中午好":14<e&&e<=18?t="下午好":18<e&&e<=24&&(t="晚上好"),t},Jay={reflashEssayWaterFall:function(){document.querySelector("#waterfall")&&setTimeout((function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")}),500)},catalogActive:function(){let e=document.getElementById("catalog-list");if(e){e.addEventListener("mousewheel",(function(t){e.scrollLeft-=t.wheelDelta/2,t.preventDefault()}),!1);let t=document.getElementById(decodeURIComponent(window.location.pathname));t.classList.add("selected"),e.scrollLeft=t.offsetLeft-e.offsetLeft-(e.offsetWidth-t.offsetWidth)/2}},sayHi:function(){document.querySelector("#author-info__sayhi")&&(document.getElementById("author-info__sayhi").innerHTML="👋"+getTimeState()+"！我是")}};function percent(){var e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100),o=document.querySelector("#percent"),a=window.scrollY+document.documentElement.clientHeight,l=document.getElementById("post-tools")||document.getElementById("footer");l.offsetTop+l.offsetHeight/2<a||90<n?(document.querySelector("#nav-totop").classList.add("long"),o.innerHTML="返回顶部"):(document.querySelector("#nav-totop").classList.remove("long"),o.innerHTML=n)}Jay.reflashEssayWaterFall(),window.addEventListener("resize",(function(){document.querySelector("#waterfall")&&Jay.reflashEssayWaterFall()})),(location.pathname.match("/categories/")||location.pathname.match("/tags/"))&&Jay.catalogActive(),Jay.sayHi(),percent(),window.onscroll=percent;