function tag_choose(){document.querySelectorAll("#tag .lists a").forEach((e=>{decodeURI(window.location.href.split("/")[4])===e.querySelector("span").innerHTML&&(e.className+="checked")})),window.addEventListener("load",(function(){document.querySelector(".lists a.checked")&&document.querySelector(".lists a.checked").scrollIntoView(),document.querySelector("#tag")&&document.querySelector("#tag").scrollIntoView()})),document.querySelectorAll("#tag .lists")[0]&&(document.querySelectorAll("#tag .lists")[0].onmousewheel=function(e){return e.deltaY>0?this.scrollLeft+=20:this.scrollLeft-=20,!1})}function category_choose(){document.querySelectorAll(".category-list .category-list-item").forEach((e=>{decodeURI(window.location.href.split("/")[4])===e.querySelector("a").innerHTML&&(e.className+=" checked")})),window.addEventListener("load",(function(){document.querySelector(".category-list .category-list-item.checked")&&document.querySelector(".category-list .category-list-item.checked").scrollIntoView(),document.querySelector("#category")&&document.querySelector("#category").scrollIntoView()})),document.querySelectorAll("#category .lists")[0]&&(document.querySelectorAll("#category .lists")[0].onmousewheel=function(e){return e.deltaY>0?this.scrollLeft+=20:this.scrollLeft-=20,!1})}function newPost(){let e=document.querySelectorAll(".recent-post-info");for(let t=0;t<e.length;t++){if(e[t].querySelector(".sticky"))continue;let o="";return o=e[t].previousSibling.classList.contains("right")?"newestPost-left":"newestPost-right",void(e[t].innerHTML+='<span class="'+o+'"></span>')}}""===GLOBAL_CONFIG_SITE.title.replace("Jayhrn","")?document.getElementById("page-name-text").style.display="none":document.querySelector("#page-name-text>span").innerHTML=document.title.split(" | Jayhrn")[0],location.pathname.match("/tags/")&&tag_choose(),location.pathname.match("/categories/")&&category_choose(),"/"==location.pathname&&newPost();var $percent=document.querySelector("#nav #hotkey #top-button a.site-page i");function changeTimeInEssay(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach((function(e){var t=e,o=t.getAttribute("datetime");console.log(o),t.innerText=btf.diffDate(o,!0),t.style.display="inline"}))}function owoBig(){let e=1,t="",o=document.createElement("div");o.id="owo-big",document.querySelector("body").appendChild(o),document.getElementById("post-comment").addEventListener("DOMNodeInserted",(n=>{if(n.target.classList&&(n.target.classList.value,1)){let r=n.target;r.addEventListener("contextmenu",(e=>e.preventDefault())),r.addEventListener("mouseover",(n=>{"LI"==n.target.tagName&&e&&(e=!1,t=setTimeout((()=>{let e=3*n.path[0].clientHeight,t=3*n.path[0].clientWidth,r=n.x-n.offsetX-(t-n.path[0].clientWidth)/2,l=n.y-n.offsetY;o.style.height=e+"px",o.style.width=t+"px",o.style.left=r+"px",o.style.top=l+"px",o.style.display="flex",o.innerHTML=`<img src="${n.target.querySelector("img").src}">`}),300))})),r.addEventListener("mouseout",(n=>{o.style.display="none",e=1,clearTimeout(t)}))}}))}function getArrayItems(e,t){var o=new Array;for(var n in e)o.push(e[n]);for(var r=new Array,l=0;l<t&&0<o.length;l++){var c=Math.floor(Math.random()*o.length);r[l]=o[c],o.splice(c,1)}return r}function addFriendLinksInFooter(){fetch("https://fcircle.jayhrn.com/randomfriend?num=3").then((function(e){return e.json()})).then((function(e){for(var t=getArrayItems(e,3),o="",n=0;n<t.length;++n){var r=t[n];o+="<a class='footer-item' href='".concat(r.link,'\'  target="_blank" rel="noopener nofollow">').concat(r.name,"</a>")}o+="<a class='footer-item' href='/link/'>查看更多</a>",document.getElementById("friend-links-in-footer").innerHTML=o}))}$percent&&window.addEventListener("scroll",(function(){let e=document.body.scrollHeight||document.documentElement.scrollHeight,t=window.innerHeight||document.documentElement.clientHeight;$percent.dataset.percent=((document.body.scrollTop||document.documentElement.scrollTop)/(e-t)*100).toFixed(0)})),"/essay/"==location.pathname&&changeTimeInEssay(),document.getElementById("post-comment")&&owoBig(),addFriendLinksInFooter();var Jay={reflashEssayWaterFall:function(){document.querySelector("#waterfall")&&setTimeout((function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")}),500)}};Jay.reflashEssayWaterFall();