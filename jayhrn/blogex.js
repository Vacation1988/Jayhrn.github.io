function addFriendLink(){var e=document.getElementsByClassName("el-textarea__inner")[0],t=document.createEvent("HTMLEvents");t.initEvent("input",!0,!0),e.value="昵称：\n网站地址：\n头像图片url：\n描述：\n",e.dispatchEvent(t),Jay.scrollTo("#post-comment"),e.focus(),e.setSelectionRange(-1,-1)}function bbDiffDate(e,t){var n,o,a,i=1<arguments.length&&void 0!==t&&t,r=new Date,c=new Date(e),d=r.getTime()-c.getTime();return i?(n=d/864e5,o=d/36e5,a=d/6e4,12<d/2592e6?c.toLocaleDateString():7<=n?c.toLocaleDateString().substr(5):1<=n?parseInt(n)+""+GLOBAL_CONFIG.date_suffix.day:1<=o||1<=a?"最近":GLOBAL_CONFIG.date_suffix.just):parseInt(d/864e5)}function getArrayItems(e,t){var n=new Array;for(var o in e)n.push(e[o]);for(var a=new Array,i=0;i<t&&0<n.length;i++){var r=Math.floor(Math.random()*n.length);a[i]=n[r],n.splice(r,1)}return a}var getTimeState=function(){var e=(new Date).getHours(),t="";return 0<=e&&e<=5?t="晚安":5<e&&e<=10?t="早上好":10<e&&e<=14?t="中午好":14<e&&e<=18?t="下午好":18<e&&e<=24&&(t="晚上好"),t};function percent(){var e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100),o=document.querySelector("#percent"),a=window.scrollY+document.documentElement.clientHeight,i=document.getElementById("post-tools")||document.getElementById("footer");i.offsetTop+i.offsetHeight/2<a||90<n?(document.querySelector("#nav-totop").classList.add("long"),o.innerHTML="返回顶部"):(document.querySelector("#nav-totop").classList.remove("long"),o.innerHTML=n),window.onscroll=percent}function navTitle(){""===GLOBAL_CONFIG_SITE.title.replace("Jayhrn","")?document.getElementById("page-name-text").style.display="none":document.querySelector("#page-name-text").innerHTML=document.title.split(" | Jayhrn")[0]}var navFn={switchDarkMode:function(){"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night,!1,2e3)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day,!1,2e3)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"===("undefined"==typeof FB?"undefined":_typeof(FB))&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((function(){return window.disqusReset()}),200);var e,t,n,o="light"===document.documentElement.getAttribute("data-theme")?"#363636":"#F7F7FA";document.getElementById("posts-chart")&&((e=postsOption).textStyle.color=o,e.title.textStyle.color=o,e.xAxis.axisLine.lineStyle.color=o,e.yAxis.axisLine.lineStyle.color=o,postsChart.setOption(e)),document.getElementById("tags-chart")&&((t=tagsOption).textStyle.color=o,t.title.textStyle.color=o,t.xAxis.axisLine.lineStyle.color=o,t.yAxis.axisLine.lineStyle.color=o,tagsChart.setOption(t)),document.getElementById("categories-chart")&&((n=categoriesOption).textStyle.color=o,n.title.textStyle.color=o,n.legend.textStyle.color=o,categoriesChart.setOption(n))}};function owoBig(){let e=1,t="",n=document.createElement("div");n.id="owo-big",document.querySelector("body").appendChild(n),document.getElementById("post-comment").addEventListener("DOMNodeInserted",(o=>{if(o.target.classList&&(o.target.classList.value,1)){let a=o.target;a.addEventListener("contextmenu",(e=>e.preventDefault())),a.addEventListener("mouseover",(o=>{"LI"==o.target.tagName&&e&&(e=!1,t=setTimeout((()=>{let e=3*o.path[0].clientHeight,t=3*o.path[0].clientWidth,a=o.x-o.offsetX-(t-o.path[0].clientWidth)/2,i=o.y-o.offsetY;n.style.height=e+"px",n.style.width=t+"px",n.style.left=a+"px",n.style.top=i+"px",n.style.display="flex",n.innerHTML=`<img src="${o.target.querySelector("img").src}">`}),300))})),a.addEventListener("mouseout",(o=>{n.style.display="none",e=1,clearTimeout(t)}))}}))}function RemoveRewardMask(){$(".reward-main").attr("style","display: none"),$("#quit-box").attr("style","display: none")}document.getElementById("post-comment")&&owoBig(),document.addEventListener("touchstart",(function(e){RemoveRewardMask()}),!1),$(document).unbind("keydown").bind("keydown",(function(e){if((e.ctrlKey||e.metaKey)&&67==e.keyCode&&""!=selectTextNow)return btf.snackbarShow("复制成功，复制和转载请标注本文地址"),rm.rightmenuCopyText(selectTextNow),!1})),document.addEventListener("scroll",btf.throttle((function(){Jay.initThemeColor()}),200)),window.onkeydown=function(e){123===e.keyCode&&btf.snackbarShow("开发者模式已打开，请遵循GPL协议",!1,3e3)},document.querySelector("#algolia-search").addEventListener("wheel",(function(e){e.preventDefault()})),window.addEventListener("resize",(function(){document.querySelector("#waterfall")&&Jay.refreshEssayWaterfall()})),document.addEventListener("pjax:send",(function(){Jay.showLoading()})),document.addEventListener("pjax:complete",(function(){addRightMenuClickEvent(),navTitle(),percent(),Jay.topPostScroll(),Jay.catalogActive(),Jay.sayhi(),Jay.addFriendLinksInFooter(),Jay.onlyHome(),Jay.addNavBackgroundInit(),Jay.initIndexEssay(),Jay.changeTimeInEssay(),Jay.refreshEssayWaterfall(),Jay.darkModeStatus(),Jay.hideLoading()})),$("input").focus((function(){Jay_intype=!0})),$("textarea").focus((function(){Jay_intype=!0})),$("input").focusout((function(){Jay_intype=!1})),$("textarea").focusout((function(){Jay_intype=!1}));